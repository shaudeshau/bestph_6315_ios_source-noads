angular.module('starter').controller('Wordpress2ListController',function($scope,$stateParams,$state,$timeout,Wordpress2){angular.extend($scope,{is_loading:!0,value_id:$stateParams.value_id,cardDesign:!1,currentPage:1,previousPage:1,collection:[],queries:[],load_more:!0,isLoadingMore:!1,use_pull_to_refresh:!0,pull_to_refresh:!1,isPullingToRefresh:!1,queryView:!0,imagePath:function(path){return IMAGE_URL+'images/application'+path}});Wordpress2.setValueId($stateParams.value_id);Wordpress2.collection=[];Wordpress2.cardDesign=!1;$scope.loadContent=function(){if($stateParams.query_id!==''){Wordpress2.loadposts($stateParams.query_id,$scope.currentPage,$scope.isPullingToRefresh).then(function(data){$scope.queryView=!1;if($scope.isPullingToRefresh){$scope.collection=[]}
$scope.page_title=data.page_title;$scope.wordpress=data.wordpress;$scope.cardDesign=$scope.wordpress.cardDesign;Wordpress2.cardDesign=$scope.cardDesign;$scope.wordpress.groupQueries=!0;$scope.collection=$scope.collection.concat(angular.copy(data.posts));Wordpress2.collection=$scope.collection;$scope.query=angular.copy(data.query)}).then(function(data){if($scope.isPullingToRefresh){$scope.currentPage=$scope.previousPage;$scope.$broadcast('scroll.refreshComplete');$timeout(function(){$scope.isPullingToRefresh=!1},100)}
if($scope.isLoadingMore){$scope.$broadcast('scroll.infiniteScrollComplete');$timeout(function(){$scope.isLoadingMore=!1},100)}
$scope.is_loading=!1})}else{Wordpress2.find($scope.currentPage,$scope.isPullingToRefresh).then(function(data){if($scope.isPullingToRefresh){$scope.collection=[]}
$scope.page_title=data.page_title;$scope.wordpress=data.wordpress;$scope.cardDesign=$scope.wordpress.cardDesign;Wordpress2.cardDesign=$scope.cardDesign;$scope.queryView=!0&&!$scope.wordpress.groupQueries;$scope.collection=$scope.collection.concat(angular.copy(data.posts));Wordpress2.collection=$scope.collection;$scope.queries=angular.copy(data.queries);$scope.query=$scope.wordpress}).then(function(data){if($scope.isPullingToRefresh){$scope.currentPage=$scope.previousPage;$scope.$broadcast('scroll.refreshComplete');$timeout(function(){$scope.isPullingToRefresh=!1},100)}
if($scope.isLoadingMore){$scope.$broadcast('scroll.infiniteScrollComplete');$timeout(function(){$scope.isLoadingMore=!1},100)}
$scope.is_loading=!1})}};$scope.loadPosts=function(queryId){$scope.currentPage=1;$state.go('wordpress2-list',{value_id:$stateParams.value_id,query_id:queryId},{reload:!0})};$scope.viewPost=function(postId){$state.go('wordpress2-view',{value_id:$stateParams.value_id,post_id:postId})};$scope.loadMore=function(){if(!$scope.isLoadingMore){$scope.isLoadingMore=!0;$scope.currentPage=$scope.currentPage+1;$scope.loadContent(!1)}};$scope.pullToRefresh=function(){if(!$scope.isPullingToRefresh){$scope.isPullingToRefresh=!0;$scope.currentPage=1;$scope.previousPage=$scope.currentPage;$scope.loadContent(!0)}};$scope.canPullToRefresh=function(){return!$scope.isLoadingMore&&!$scope.is_loading&&$scope.use_pull_to_refresh};$scope.canLoadMore=function(){return!$scope.queryView&&!$scope.isPullingToRefresh&&!$scope.is_loading&&$scope.load_more};$scope.loadContent(!1)}).controller('Wordpress2ViewController',function($filter,$scope,$stateParams,Wordpress2){angular.extend($scope,{is_loading:!0,value_id:$stateParams.value_id,search:{},cardDesign:!1,post:null,imagePath:function(path){return IMAGE_URL+'images/application'+path}});$scope.loadContent=function(){$scope.cardDesign=Wordpress2.cardDesign;$scope.post=_.find(Wordpress2.collection,function(post){return post.id==$stateParams.post_id});$scope.post.mtDate=$filter('moment')($scope.post.date).calendar();$scope.page_title=$scope.post.title};$scope.loadContent()});angular.module('starter').factory('Wordpress2',function($pwaRequest){var factory={value_id:null,folder_id:null,categories:[],searchIndex:[],showSearch:!1,extendedOptions:{}};factory.setValueId=function(valueId){factory.value_id=valueId};factory.setExtendedOptions=function(options){factory.extendedOptions=options};factory.find=function(page,pullToRefresh){return $pwaRequest.get('wordpress2/mobile_list/find',{urlParams:{value_id:factory.value_id,page:page,refresh:pullToRefresh}})};factory.loadposts=function(queryId,page,pullToRefresh){return $pwaRequest.get('wordpress2/mobile_list/loadposts',{urlParams:{value_id:factory.value_id,queryId:queryId,page:page,refresh:pullToRefresh}})};return factory});Features.insertCSS(":root{--safe-area-inset-top:0;--safe-area-inset-right:0;--safe-area-inset-bottom:0;--safe-area-inset-left:0}@supports (padding-top:constant(safe-area-inset-top)){:root{--safe-area-inset-top:constant(safe-area-inset-top);--safe-area-inset-right:constant(safe-area-inset-right);--safe-area-inset-bottom:constant(safe-area-inset-bottom);--safe-area-inset-left:constant(safe-area-inset-left)}}@supports (padding-top:env(safe-area-inset-top)){:root{--safe-area-inset-top:env(safe-area-inset-top);--safe-area-inset-right:env(safe-area-inset-right);--safe-area-inset-bottom:env(safe-area-inset-bottom);--safe-area-inset-left:env(safe-area-inset-left)}}.platform-overview.platform-cordova{--safe-area-inset-top:1.5em;--safe-area-inset-right:0;--safe-area-inset-bottom:.5em;--safe-area-inset-left:0}.module-wordpress2 .post-content img{max-width:100%;height:auto}.module-wordpress2 .post-content p{margin-bottom:1em}.module-wordpress2 .post-content iframe{max-width:100%;height:auto}","wordpress_v2")