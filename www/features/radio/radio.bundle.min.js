angular.module('starter').factory('Radio',function($pwaRequest,MusicTracksLoader,MediaPlayer){var factory={value_id:null,extendedOptions:{}};factory.setValueId=function(valueId){factory.value_id=valueId};factory.setExtendedOptions=function(options){factory.extendedOptions=options};factory.find=function(){if(!this.value_id){return $pwaRequest.reject('[Factory::Radio.find] missing value_id')}
var payload=$pwaRequest.getPayloadForValueId(factory.value_id);if(payload!==!1){return $pwaRequest.resolve(payload)}
return $pwaRequest.get('radio/mobile_radio/find',angular.extend({urlParams:{value_id:this.value_id}},factory.extendedOptions))};factory.openCallback=function(feature){factory.setValueId(feature.value_id);factory.find().then(function(data){var tracksLoader=MusicTracksLoader.loadSingleTrack({name:data.radio.title,artistName:'',streamUrl:data.radio.url,albumCover:data.radio.background,albumName:''});MediaPlayer.init(tracksLoader,!0,0)})};return factory});Features.insertCSS("","radio")